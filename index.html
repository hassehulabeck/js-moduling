<html>
<head>
  <title>Blandningsfunktion</title>
</head>
<body>

</body>
</html>

<script>
  var lista = ["a","b","c","d","e","f","a","b","c","d","e","f"];
  shuffleWithCare(lista);

  console.log(lista);

  function shuffleWithCare(elements) {

    var previousElement;

    // Jag förväntar mig en array. Om inte, så skickar jag tillbaka false.
    if (!Array.isArray(elements)) {
      return false;
    }

    // Vanlig slumpvis blandning.
    function shuffle(a) {
      for (let i = a.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [a[i], a[j]] = [a[j], a[i]];
      }
      return a;
    }

    shuffle(elements);

    var i = 0;

    elements.forEach(function(element) {
      if (previousElement == element) {
        // Om lika, klipp ut elementet...
        let x = elements.splice(i, 1);
        // ...och lägg elementet på slutet eller i början, beroende på hur långt vi kommit.
        if (i < elements.length/2) {
          elements.push(x[0]);
        }
        else {
          elements.unshift(x[0]);
        }
      }
      i++;
      previousElement = element;
      console.log(previousElement);
    })

    return elements;
  }

</script>
